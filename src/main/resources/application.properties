############################################
# NAILORA — Spring Boot Application (DEV)
############################################

# ── App
spring.application.name=NAILORA
server.port=${PORT:8080}

# ---- Datasource: อ่านจาก ENV ทั้งหมด
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# --- Stripe (อ่านจาก ENV)
stripe.secret.key=${STRIPE_SECRET_KEY}
stripe.webhook.secret=${STRIPE_WEBHOOK_SECRET}
stripe.publishable.key=${STRIPE_PUBLISHABLE_KEY}

# ── Timezone / JSON
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Bangkok
spring.jackson.time-zone=Asia/Bangkok
app.timezone=Asia/Bangkok

# ---- Hibernate/JPA (Postgres)
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# ── SQL seed (data.sql)
# รัน seed ทุกครั้งหลังสร้างตาราง (DEV)
spring.sql.init.mode=never
spring.jpa.defer-datasource-initialization=true
# (ถ้าไฟล์มีภาษาไทย/อีโมจิและระบบเพี้ยน ให้เปิดบรรทัดนี้)
spring.sql.init.encoding=UTF-8

# ── Thymeleaf
spring.thymeleaf.cache=false

# ── Business Config (อ่านผ่าน AppProps)
app.deposit.percent=0.30
app.deposit.holdSeconds=300
app.refund.cutoffHours=48
app.emergency.window.hours=24
app.reschedule.credit.days=30

# ── Logging (DEV only)
logging.level.org.hibernate.SQL=debug
logging.level.org.hibernate.orm.jdbc.bind=trace
logging.level.com.nailora=debug
logging.level.org.springframework.security=TRACE
logging.level.com.stripe=DEBUG

# ── App guard 
app.payment.currency=thb
app.webhook.idempotency=true

# ── Password Hash
app.dev.admin.enabled=true
app.dev.admin.username=NailoraAdmin
app.dev.admin.bcrypt={bcrypt}$2a$10$Jv5TmcY68k.fp/ImRLjDdOYp1tfURGNwuFaTUWyDpxZ.GjYEPyMee

# ── Secrets (Stripe keys, etc.)
spring.config.import=optional:application-secret.properties
