<!-- templates/admin/service-form.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="th"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{layout :: layout(~{::section})}">
<section>

  <div class="container my-4" th:object="${service}" style="max-width:700px;">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="h4 mb-0" th:text="${mode} == 'edit' ? 'แก้ไขบริการ' : 'เพิ่มบริการ'">เพิ่มบริการ</h1>
      <a class="btn btn-outline-secondary" th:href="@{/admin/services}">← กลับรายการบริการ</a>
    </div>

    <!-- Error Alert -->
    <div th:if="${#fields.hasErrors('*')}" class="alert alert-danger rounded-3 shadow-sm">
      โปรดตรวจสอบข้อมูลให้ครบถ้วน
    </div>

    <!-- Form Card -->
    <form th:action="${mode} == 'edit' ? @{'/admin/services/' + *{id}} : @{/admin/services}"
          method="post" novalidate style="background:#fff; padding:2rem; border-radius:1rem; box-shadow:0 4px 12px rgba(0,0,0,0.08);">

      <!-- CSRF -->
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

      <!-- Service Name -->
      <div class="mb-3">
        <label class="form-label fw-semibold">ชื่อบริการ</label>
        <input class="form-control shadow-sm" type="text" th:field="*{name}" placeholder="เช่น ทำเล็บเจล" required style="border-radius:.6rem;">
        <div class="text-danger small mt-1" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">err</div>
      </div>

      <!-- Duration, Price, Deposit -->
      <div class="row">
        <div class="col-md-4 mb-3">
          <label class="form-label fw-semibold">ระยะเวลา (นาที)</label>
          <input class="form-control shadow-sm" type="number" min="1" th:field="*{durationMin}" required style="border-radius:.6rem;">
          <div class="text-danger small mt-1" th:if="${#fields.hasErrors('durationMin')}" th:errors="*{durationMin}">err</div>
        </div>
        <div class="col-md-4 mb-3">
          <label class="form-label fw-semibold">ราคา</label>
          <input class="form-control shadow-sm" type="number" step="0.01" min="0" th:field="*{price}" required style="border-radius:.6rem;">
          <div class="text-danger small mt-1" th:if="${#fields.hasErrors('price')}" th:errors="*{price}">err</div>
        </div>
        <div class="col-md-4 mb-3">
          <label class="form-label fw-semibold">มัดจำขั้นต่ำ</label>
          <input class="form-control shadow-sm" type="number" step="0.01" min="0" th:field="*{depositMin}" required style="border-radius:.6rem;">
          <div class="text-danger small mt-1" th:if="${#fields.hasErrors('depositMin')}" th:errors="*{depositMin}">err</div>
        </div>
      </div>

      <!-- Active Switch -->
      <div class="form-check form-switch mb-4">
        <input class="form-check-input" type="checkbox" th:field="*{active}" id="activeSwitch">
        <label class="form-check-label fw-semibold" for="activeSwitch">ใช้งาน</label>
      </div>

      <!-- Action Buttons -->
      <div class="d-flex gap-2">
        <button class="btn btn-primary shadow-sm" type="submit" style="border-radius:.6rem; padding:.5rem 1.2rem;">บันทึก</button>
        <a class="btn btn-secondary shadow-sm" th:href="@{/admin/services}" style="border-radius:.6rem; padding:.5rem 1.2rem;">ยกเลิก</a>
      </div>
    </form>

  </div>

  <!-- Responsive Minor CSS -->
  <style>
    @media (max-width: 576px) {
      .row > .col-md-4 {
        margin-bottom: 1rem;
      }
    }
  </style>

</section>
</html>
